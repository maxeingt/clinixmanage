# OIDC habilitado para tests - no conecta en startup, JsonWebToken CDI bean disponible
# NO deshabilitar OIDC (quarkus.oidc.enabled=false) porque elimina el bean JsonWebToken
quarkus.oidc.auth-server-url=http://localhost:9999/test-realm
quarkus.oidc.discovery-enabled=false
# JWKS requerido con discovery-enabled=false; se carga lazy (no en startup)
quarkus.oidc.jwks-path=http://localhost:9999/test-realm/protocol/openid-connect/certs
quarkus.oidc.client-id=test-client
quarkus.oidc.credentials.secret=test-secret
quarkus.oidc.token.issuer=test-issuer

# H2 en memoria para tests (repos mockeados no necesitan DB real)
quarkus.datasource.db-kind=h2
quarkus.datasource.jdbc.url=jdbc:h2:mem:testdb
# Sobrescribir el driver PostgreSQL del main properties
quarkus.datasource.jdbc.driver=org.h2.Driver

# No crear ni validar schema (todo est√° mockeado)
quarkus.hibernate-orm.database.generation=none
quarkus.hibernate-orm.log.sql=false

# Multi-tenancy DISCRIMINATOR sigue activo (entidades tienen @TenantId)
quarkus.hibernate-orm.multitenant=DISCRIMINATOR

# Keycloak admin client - apunta a servidor inexistente (beans lazy, no conecta en startup)
keycloak.admin.server-url=http://localhost:9999
keycloak.admin.realm=test-realm
keycloak.admin.client-id=test-client
keycloak.admin.client-secret=test-secret
